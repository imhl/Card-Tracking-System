<!DOCTYPE html>
<html>
    <head>
        <title>Card Tracking System</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="lib/css/bootstrap.min.css">
        <script src="lib/js/jquery.min.js"></script>
        <script src="lib/css/bootstrap.min.css"></script>
        <script type="text/javascript" src="lib/js/webqr.js"></script>
        <script type="text/javascript" src="lib/js/llqrcode.js"></script>
        <link rel="stylesheet" type="text/css" href="lib/css/mystyle.css">

        <script>
            function press() {

                var staffname = $("#staff").val();
                var mode = $("#mode").val();
                var qrcode = $("#result").html();
                var request;
                if (staffname != "" && mode != "" && qrcode != "") {
                    //disable button
                    $("#submitbtn").attr("disabled","disabled");
                    $("#clearbtn").attr("disabled","disabled");
                    
                    request = $.ajax({
                        url: "....",
                        type: "post",
                        data: {"Name": staffname, "Mode": mode, "QR Code": qrcode}
                    });

                    document.getElementById("successbox").style.display="block";
                    document.getElementById("errbox").style.display="none";
                    setTimeout(function(){
                        location.reload();
                    },950);                    
                } else {
                    document.getElementById("errbox").style.display = "block";                   
                }
            }
            
            function clearField(){
                $("#staff").val("");
                $("#mode").val("");
                $("#result").html("");
                document.getElementById("errbox").style.display = "none";
            }
        </script>
    </head>

    <body>
        <div class="container">
            <div class="page-header">
                <h2>AF Access Pass Card Tracking System</h2>
            </div>
            <img src="lib/img/UniSIM.gif" alt="Responsive Image">
            <p></p><p></p>
            <div class="row">
                <div class="col-md-4">                    
                    <div class="alert alert-danger" role="alert" id="errbox">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        <span class="sr-only">Error:</span>
                        Please check your inputs....
                    </div> 
                    <div class="alert alert-success" role="alert" id="successbox">
                        <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                        <span class="sr-only">Success:</span>
                       You have successfully submitted the entry.....
                    </div>
                    <p><p><p><p>
                    <form id="form1" method="post">
                        <div class="form-group">
                            <label for="staffname">Staff Name: </label>
                            <select class="form-control" required id="staff" name="staffselect">
                                <option value=""></option>
                                <option value="Alan">Alan</option>
                                <option value="He Jiang">He Jiang</option>
                                <option value="Rosly">Rosly</option>
                                <option value="Fazil" >Fazil</option>
                                <option value="Siti">Siti</option>
                                <option value="Deryk">Deryk</option>
                                <option value="Yiu">Yiu</option>
                                <option value="Shirley">Shirley</option>
                            </select>                            
                        </div>
                        <div class="form-group">
                            <label for="mode">Mode:</label>
                            <select class="form-control" id="mode" required name="modeselect">
                                <option value=""></option>
                                <option value="Issue" >Issue Card</option>
                                <option value="Return">Return Card</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="qrcode">QR Code:</label>
                            <span id="result"></span>
                        </div>
                        <div class="row">
                            <table class="tsel" border="0" width="100%">
                                <tr>
                                    <td valign="top" align="center" width="50%">
                                        <table class="tsel" border="0">
                                            <tr>
                                                <td><img class="selector" id="webcamimg" src="lib/img/scan.jpg" onclick="setwebcam()" align="left" /></td>
                                                <td><img class="selector" id="qrimg" onclick="setimg()" align="right"/></td>
                                            </tr>

                                            <tr><td colspan="2" align="center">
                                                    <div id="outdiv">
                                                    </div></td></tr>
                                        </table>
                                    </td>
                                </tr>                                                              
                            </table>
                            <p>

                        </div>
                        <button type="button" id="submitbtn" class="btn btn-success" onclick="press()">Submit</button>&nbsp;&nbsp;<button type="button" id="clearbtn" class="btn btn-primary" onclick="clearField()">Clear Fields</button>
                    </form>
                    <canvas id="qr-canvas" width="800" height="600"></canvas>
                    <script type="text/javascript">load();</script>
                </div>
            </div>
        </div>
    </body>
</html>
